---
interface BentoGridItem {
  title: string;
  description: string;
  imageSrc: string;
  imageAlt: string;
  buttonText: string;
  buttonHref: string;
  size: 'small' | 'medium' | 'large' | 'wide' | 'tall';
  variant: 'default' | 'featured' | 'minimal';
  icon?: any;
}

interface Props {
  items: BentoGridItem[];
  class?: string;
}

const { items, class: className = "" } = Astro.props;

// Simple class name utility
const cn = (...classes: (string | boolean | undefined)[]): string => {
  return classes.filter(Boolean).join(' ');
};
---

<div class={cn(
  "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-3 gap-6 md:gap-8 lg:gap-6",
  "auto-rows-[160px] md:auto-rows-[180px] lg:auto-rows-[200px] xl:auto-rows-[220px]",
  className
)}>
  {items.map((item, index) => {
    const isLarge = item.size === 'large';
    const isMedium = item.size === 'medium';
    const isSmall = item.size === 'small';
    const isWide = item.size === 'wide';
    const isTall = item.size === 'tall';
    const isFeatured = item.variant === 'featured';
    
    const cardClasses = cn(
      "group relative overflow-hidden rounded-2xl transition-all duration-700 hover:shadow-2xl hover:-translate-y-1",
      "bg-white border border-gray-200 shadow-lg",
      "hover:border-gray-300 hover:shadow-xl cursor-pointer block",
      isLarge && "md:col-span-1 lg:col-span-1 xl:col-span-1 md:row-span-2 lg:row-span-2 xl:row-span-2",
      isWide && "md:col-span-1 lg:col-span-2 xl:col-span-2 md:row-span-2 lg:row-span-1 xl:row-span-1",
      isTall && "md:col-span-1 sm:col-span-2 lg:col-span-1 xl:col-span-1 md:row-span-2 lg:row-span-2 xl:row-span-2",
      (isMedium || isSmall) && "md:col-span-1 lg:col-span-1 xl:col-span-1 md:row-span-1 lg:row-span-1 xl:row-span-1",
      isFeatured && "ring-2 ring-primary/20 bg-gradient-to-br from-primary/5 to-secondary/5 hover:ring-primary/40"
    );
    
    const titleClasses = cn(
      "font-bold text-white drop-shadow-lg leading-tight",
      isSmall && "text-base md:text-lg",
      (isMedium || isTall) && "text-lg md:text-xl",
      isLarge && "text-xl md:text-2xl lg:text-3xl",
      isWide && "text-lg md:text-xl lg:text-2xl"
    );
    
    const descriptionClasses = cn(
      "text-white/90 leading-relaxed drop-shadow-md hidden md:block lg:hidden xl:block",
      (isMedium || isTall) && "text-xs md:text-sm max-w-xs",
      isLarge && "text-sm md:text-base max-w-md lg:max-w-lg",
      isWide && "text-xs md:text-sm max-w-lg lg:text-xs",
      isSmall && "text-xs md:text-sm max-w-xs md:hidden"
    );
    
    return (
      <a
        href={item.buttonHref}
        class={cardClasses}
      >
        {/* Background Image */}
        <div class="absolute inset-0">
          <img
            src={item.imageSrc}
            alt={item.imageAlt}
            class="object-cover w-full h-full transition-transform duration-700 group-hover:scale-105 brightness-75"
            loading="lazy"
            decoding="async"
          />
          
          {/* Enhanced Gradient Overlays */}
          <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent" />
          <div class="absolute inset-0 bg-gradient-to-r from-black/40 via-transparent to-transparent" />
          
          {/* Subtle Pattern Overlay */}
          <div class="absolute inset-0 opacity-10 bg-[radial-gradient(circle_at_50%_50%,rgba(255,255,255,0.2)_1px,transparent_1px)] bg-[length:20px_20px]" />
        </div>
        
        {/* Content Container */}
        <div class="relative h-full p-3 md:p-4 flex flex-col justify-between">
          {/* Top Section */}
          <div class="space-y-2">
            {/* Featured Badge */}
            {isFeatured && (
              <div class="flex items-center space-x-2">
                <div class="bg-white/20 backdrop-blur-sm rounded-full px-3 py-1 border border-white/30">
                  <div class="flex items-center space-x-1">
                    <span class="text-xs font-bold text-white">Featured</span>
                  </div>
                </div>
              </div>
            )}
            
            {/* Title */}
            <h3 class={titleClasses}>
              {item.title}
            </h3>
            
            {/* Description */}
            {(isMedium || isLarge || isTall || isWide || isSmall) && (
              <p class={descriptionClasses}>
                {item.description}
              </p>
            )}
            
            {/* Service Features for Large and Wide Cards (hidden on mobile) */}
            {(isLarge || isWide) && (
              <div class="hidden md:flex flex-wrap gap-2">
                {isLarge && ['Custom Design', 'Professional Installation', 'Warranty Included'].map((feature) => (
                  <div class="bg-white/20 backdrop-blur-sm rounded-full px-3 py-1 border border-white/30">
                    <span class="text-xs font-medium text-white">{feature}</span>
                  </div>
                ))}
                {isWide && ['Expert Team', 'Quality Materials', 'Timely Service'].map((feature) => (
                  <div class="bg-white/20 backdrop-blur-sm rounded-full px-2 py-1 border border-white/30">
                    <span class="text-xs font-medium text-white">{feature}</span>
                  </div>
                ))}
              </div>
            )}
          </div>
          
          {/* Bottom Section - Hover Indicator */}
          <div class="flex justify-end items-end">
            <div class="bg-white/20 backdrop-blur-sm rounded-full p-2 shadow-lg transition-all duration-300 group-hover:scale-110">
              <svg class="w-5 h-5 text-white transition-transform duration-300 group-hover:translate-x-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
              </svg>
            </div>
          </div>
        </div>
      </a>
    );
  })}
</div>

